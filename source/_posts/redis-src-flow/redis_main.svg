<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink" version="1.1" viewBox="128 4 365 983" width="365pt" height="983pt" xmlns:dc="http://purl.org/dc/elements/1.1/"><metadata> Produced by OmniGraffle 6.4.1 <dc:date>2015-12-24 03:51:12 +0000</dc:date></metadata><defs><filter id="Shadow" filterUnits="userSpaceOnUse"><feGaussianBlur in="SourceAlpha" result="blur" stdDeviation="1.308"/><feOffset in="blur" result="offset" dx="0" dy="2"/><feFlood flood-color="black" flood-opacity=".5" result="flood"/><feComposite in="flood" in2="offset" operator="in"/></filter><marker orient="auto" overflow="visible" markerUnits="strokeWidth" id="FilledArrow_Marker" viewBox="-1 -4 10 8" markerWidth="10" markerHeight="8" color="black"><g><path d="M 8 0 L 0 -3 L 0 3 Z" fill="currentColor" stroke="currentColor" stroke-width="1"/></g></marker><font-face font-family="PingFang SC" font-size="10" panose-1="2 11 4 0 0 0 0 0 0 0" units-per-em="1000" underline-position="-150" underline-thickness="58" slope="0" x-height="600" cap-height="860" ascent="1060.00215" descent="-340.00069" font-weight="500"><font-face-src><font-face-name name="PingFangSC-Regular"/></font-face-src></font-face><font-face font-family="Helvetica" font-size="10" units-per-em="1000" underline-position="-75.683594" underline-thickness="49.316406" slope="0" x-height="522.94922" cap-height="717.28516" ascent="770.01953" descent="-229.98047" font-weight="500"><font-face-src><font-face-name name="Helvetica"/></font-face-src></font-face></defs><g stroke="none" stroke-opacity="1" stroke-dasharray="none" fill="none" fill-opacity="1"><title>Canvas 1</title><rect fill="white" width="576" height="1466"/><g><title>Layer 1</title><g><xl:use xl:href="#id1_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id19_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id120_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16876_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id3_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16880_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16881_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16885_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16888_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16891_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16892_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16895_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16898_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16899_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16902_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16903_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16905_Graphic" filter="url(#Shadow)"/><xl:use xl:href="#id16906_Graphic" filter="url(#Shadow)"/></g><line x1="211.875" y1="114.25" x2="211.875" y2="130.975" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id1_Graphic"><path d="M 161.475 15.625 L 262.275 15.625 C 274.1982 15.625 283.875 23.689 283.875 33.625 C 283.875 43.561 274.1982 51.625 262.275 51.625 L 161.475 51.625 C 149.5518 51.625 139.875 43.561 139.875 33.625 C 139.875 23.689 149.5518 15.625 161.475 15.625" fill="white"/><path d="M 161.475 15.625 L 262.275 15.625 C 274.1982 15.625 283.875 23.689 283.875 33.625 C 283.875 43.561 274.1982 51.625 262.275 51.625 L 161.475 51.625 C 149.5518 51.625 139.875 43.561 139.875 33.625 C 139.875 23.689 149.5518 15.625 161.475 15.625" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(159.275 26.625)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="42.6" y="11" textLength="20">开始</tspan></text></g><g id="id19_Graphic"><rect x="139.875" y="78.25" width="144" height="36" fill="white"/><rect x="139.875" y="78.25" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 82.25)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="37" y="11" textLength="60">基本环境设置</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="9.205" y="25" textLength="115.59">(locale、hash函数种子等)</tspan></text></g><g id="id120_Graphic"><rect x="139.875" y="140.875" width="144" height="36" fill="white"/><rect x="139.875" y="140.875" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 144.875)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="17" y="11" textLength="100">初始化默认服务器配置</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="26.41" y="25" textLength="68.61">initServerConfi</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="95.02" y="25" textLength="12.57">g()</tspan></text></g><g id="id16876_Graphic"><rect x="139.875" y="380" width="144" height="36" fill="#dadada"/><rect x="139.875" y="380" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 384)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="37" y="11" textLength="60">初始化服务器</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="41.77" y="25" textLength="50.46">initServer()</tspan></text></g><line x1="211.875" y1="52.125" x2="211.875" y2="68.35" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id3_Graphic"><path d="M 211.875 201 L 256.875 219 L 211.875 237 L 166.875 219 Z" fill="white"/><path d="M 211.875 201 L 256.875 219 L 211.875 237 L 166.875 219 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(184.025 211.64)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="8.75" y="11" textLength="40">哨兵模式</tspan></text></g><line x1="211.875" y1="176.875" x2="211.875" y2="191.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16880_Graphic"><rect x="368" y="201" width="114" height="36" fill="white"/><rect x="368" y="201" width="114" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(373 205)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="7" y="11" textLength="90">初始化哨兵模式配置</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="7.65" y="25" textLength="76.13">initSentinelConfi</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="83.78" y="25" textLength="12.57">g()</tspan></text></g><g id="id16881_Graphic"><rect x="368" y="260" width="114" height="36" fill="white"/><rect x="368" y="260" width="114" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(373 264)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="17" y="11" textLength="70">初始化哨兵模式</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="23.01" y="25" textLength="57.98">initSentinel()</tspan></text></g><line x1="256.875" y1="219" x2="358.1" y2="219" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="425" y1="237" x2="425" y2="250.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="237" x2="211.875" y2="293.85" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16885_Graphic"><path d="M 211.875 303.75 L 256.875 321.75 L 211.875 339.75 L 166.875 321.75 Z" fill="white"/><path d="M 211.875 303.75 L 256.875 321.75 L 211.875 339.75 L 166.875 321.75 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(184.025 314.39)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="8.75" y="11" textLength="40">启动参数</tspan></text></g><path d="M 368 278 L 356.1 278 L 211.875 278 L 211.875 291.85 L 211.875 293.85" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="339.75" x2="211.875" y2="370.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16888_Graphic"><rect x="368" y="343" width="114" height="36" fill="white"/><rect x="368" y="343" width="114" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(373 354)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="7" y="11" textLength="90">覆盖默认服务器配置</tspan></text></g><path d="M 256.875 321.75 L 268.775 321.75 L 425 321.75 L 425 331.1 L 425 333.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><path d="M 425 379 L 425 390.9 L 425 398 L 295.775 398 L 293.775 398" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16891_Graphic"><path d="M 211.875 440 L 256.875 458 L 211.875 476 L 166.875 458 Z" fill="white"/><path d="M 211.875 440 L 256.875 458 L 211.875 476 L 166.875 458 Z" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(184.025 450.64)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="8.75" y="11" textLength="40">守护进程</tspan></text></g><g id="id16892_Graphic"><rect x="368" y="440" width="114" height="36" fill="white"/><rect x="368" y="440" width="114" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(373 444)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="10.327637" y="11" textLength="40">创建存放</tspan><tspan font-family="Helvetica" font-size="10" font-weight="500" x="50.327637" y="11" textLength="13.3447266">pid</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="63.672363" y="11" textLength="30">的文件</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="18.455" y="25" textLength="67.09">createPidFile()</tspan></text></g><line x1="256.875" y1="458" x2="358.1" y2="458" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="416" x2="211.875" y2="430.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16895_Graphic"><rect x="139.875" y="504" width="144" height="36" fill="white"/><rect x="139.875" y="504" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 508)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="37" y="11" textLength="60">修改进程名为</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="38.505" y="25" textLength="56.99">redis-server</tspan></text></g><line x1="211.875" y1="476" x2="211.875" y2="494.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><path d="M 425 476 L 425 487.9 L 425 522 L 295.775 522 L 293.775 522" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16898_Graphic"><rect x="139.875" y="568.5" width="144" height="36" fill="white"/><rect x="139.875" y="568.5" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 579.5)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="21.709473" y="11" textLength="40">打印输出</tspan><tspan font-family="Helvetica" font-size="10" font-weight="500" x="61.709473" y="11" textLength="21.674805">redis</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="83.384277" y="11" textLength="10">的</tspan><tspan font-family="Helvetica" font-size="10" font-weight="500" x="93.38428" y="11" textLength="18.90625">logo</tspan></text></g><g id="id16899_Graphic"><rect x="139.875" y="634" width="144" height="36" fill="white"/><rect x="139.875" y="634" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 638)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="32" y="11" textLength="70">从磁盘加载数据</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="28.37" y="25" textLength="77.26">(RDB或AOF方式)</tspan></text></g><line x1="211.875" y1="540" x2="211.875" y2="558.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="604.5" x2="211.875" y2="624.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16902_Graphic"><rect x="139.875" y="787" width="144" height="36" fill="#dadada"/><rect x="139.875" y="787" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 791)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="37" y="11" textLength="60">开始事件循环</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="46.82" y="25" textLength="40.36">aeMain()</tspan></text></g><g id="id16903_Graphic"><rect x="139.875" y="721.25" width="144" height="36" fill="white"/><rect x="139.875" y="721.25" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 725.25)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="12" y="11" textLength="110">事件循环前要处理的函数</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="35.755" y="25" textLength="62.49">beforeSleep()</tspan></text></g><path d="M 211.875 847.04835 L 223.775 847.04835 L 430 847.04835 L 430 780 L 430 700 L 310 700 L 211.875 700 L 211.875 709.35 L 211.875 711.35" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><g id="id16905_Graphic"><path d="M 161.475 940 L 262.275 940 C 274.1982 940 283.875 948.064 283.875 958 C 283.875 967.936 274.1982 976 262.275 976 L 161.475 976 C 149.5518 976 139.875 967.936 139.875 958 C 139.875 948.064 149.5518 940 161.475 940" fill="white"/><path d="M 161.475 940 L 262.275 940 C 274.1982 940 283.875 948.064 283.875 958 C 283.875 967.936 274.1982 976 262.275 976 L 161.475 976 C 149.5518 976 139.875 967.936 139.875 958 C 139.875 948.064 149.5518 940 161.475 940" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(159.275 951)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="42.6" y="11" textLength="20">结束</tspan></text></g><g id="id16906_Graphic"><rect x="139.875" y="868.5" width="144" height="36" fill="white"/><rect x="139.875" y="868.5" width="144" height="36" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(144.875 872.5)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="32" y="11" textLength="70">删除事件处理器</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="18.625" y="25" textLength="96.75">aeDeleteEventLoop()</tspan></text></g><line x1="211.875" y1="670" x2="211.875" y2="711.35" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="757.25" x2="211.875" y2="777.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="823" x2="211.875" y2="858.6" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><line x1="211.875" y1="904.5" x2="211.875" y2="930.1" marker-end="url(#FilledArrow_Marker)" stroke="black" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/><text transform="translate(305 200.3584)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="10">是</tspan></text><text transform="translate(197.8623 260.3584)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="10">否</tspan></text><text transform="translate(265 303)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="130">指定配置文件路径或启动参数</tspan></text><text transform="translate(285 440.3584)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="10">是</tspan></text><text transform="translate(225 480.3584)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="10">否</tspan></text><text transform="translate(415 760)" fill="black"><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="11" textLength="10">下</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="25" textLength="10">一</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="39" textLength="10">次</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="53" textLength="10">循</tspan><tspan font-family="PingFang SC" font-size="10" font-weight="500" x="0" y="67" textLength="10">环</tspan></text></g></g></svg>
